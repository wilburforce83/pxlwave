<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Pxlwave - HAM Radio Digital Mode</title>
   <link rel="stylesheet" href="feather.min.css">
   <link rel="stylesheet" href="styles.css">
</head>
<body class="dark">
    <!-- Modal for selecting saved cards -->
<div id="card-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; z-index: 1000;">
    <div style="background-color: #444; padding: 20px; border-radius: 10px; text-align: center; max-width: 600px; width: 90%;">
        <h3 style="color: #f5f5f5;">Select a Card</h3>
        <div id="modal-content" style="display: flex; flex-wrap: wrap; justify-content: center; max-height: 300px; overflow-y: auto;">
            <!-- Cards will be rendered here -->
        </div>
        <button id="modal-close" style="margin-top: 10px;">Close</button>
    </div>
</div>
    <div class="container" style="display: flex; justify-content: center;">
        <h3 style="font-size: 0.8em; padding: 5px; color: #f5f5f5; text-align: left;">Pxlwave</h3>
    </div>
    <div class="container" style="display: flex; justify-content: center;">
       <!-- Main Content Area for TX, RX, and Log -->
       <div class="row" style="display: flex; gap: 20px;">
           <!-- Transmit Panel (Left) -->
           <div class="col-4" style="font-size: 0.85em; width: 400px;">
               <div class="card" style="padding: 10px; min-height: 550px;">
                   <h3 style="font-size: 1.1em; margin-bottom: 8px; color: #f5f5f5;">Transmit (TX)</h3>
                   <div id="image-grid" class="image-grid card" style="padding: 15px; min-height: 80px; background-color: #333; color: #bbb; display: flex; justify-content: center; align-items: center;">
                    <canvas id="image-preview" width="128" height="128" style="border: 1px solid #f5f5f5;"></canvas>
                </div>
                   <form style="margin-top: 8px;">
                        <div class="form-group">
                            <label for="recording-device">Decoding Device</label>
                            <select id="recording-device" class="input">
                                <option>Loading devices...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="playback-device">Transmission Device</label>
                            <select id="playback-device" class="input">
                                <option>Loading devices...</option>
                            </select>
                        </div>
                    </form>
                    <form style="margin-top: 8px;">
                       <div class="form-row">
                           <div class="form-group">
                               <label for="to-callsign">To Callsign</label>
                               <input class="input" type="text" id="to-callsign" placeholder="Recipient callsign">
                           </div>
                           <div class="form-group">
                               <label for="from-callsign">From Callsign</label>
                               <input class="input" type="text" id="from-callsign" placeholder="Your callsign" readonly>
                           </div>
                       </div>

                       <div class="form-group" style="margin-top: 8px;">
                        <label>Select Mode</label><br>
                        <div class="radio-group">
                            <label class="radio">
                                <input type="radio" name="mode" value="color" checked>
                                <span class="checkmark"></span>
                                Color
                            </label>
                            <label class="radio">
                                <input type="radio" name="mode" value="4-gray">
                                <span class="checkmark"></span>
                                4-T
                            </label>
                        </div>
                    </div>
                    
                    
                    </div>
                    

                       <button id="transmit-button" class="button-primary" style="width: 100%;">Transmit</button>
                   </form>
               </div>
           </div>

           <!-- Receive Panel (Center) -->
           <div class="col-4" style="font-size: 0.85em; width: 400px;">
               <div class="card" style="padding: 10px; min-height: 550px;">
                   <h3 style="font-size: 1.1em; margin-bottom: 8px; color: #f5f5f5;">Receive (RX)</h3>
                   <div class="row" style="display: flex; align-items: center; gap: 10px;">
                       <!-- RX Header Information Column -->
                       <div id="rx-info" style="flex: 1;">
                           <ul class="list">
                               <li><strong>Image Type:</strong> <span id="image-type">N/A</span></li>
                               <li><strong>Sender:</strong> <span id="sender-callsign">N/A</span></li>
                               <li><strong>To:</strong> <span id="recipient-callsign">N/A</span></li>
                           </ul>
                       </div>

                       <!-- RX Display Column -->
                       <div id="rx-display" style="width: 128px; height: 128px; background-color: #2d2d2d; display: flex; align-items: center; justify-content: center;">
                           <img id="received-image" src="" alt="Received Image" style="width: 100%; height: 100%; display: none;">
                       </div>
                   </div>

                   <!-- Decode Button -->
                   <div style="margin-top: 10px;">
                       <button id="decode-button" class="button-secondary" style="width: 100%;">Start Decoding</button>
                   </div>
                   <!-- Waterfall Display Canvas -->
                   <label for="speed-control" style="color: #f5f5f5;">Waterfall Speed</label>
                   <input type="range" id="speed-control" min="1" max="10" value="5" style="width: 100%;"> 

                   <label for="amplitude-control" style="color: #f5f5f5; margin-top: 10px;">Amplitude Color Mapping</label>
                   <input type="range" id="amplitude-control" min="0" max="100" value="50" style="width: 100%;">
                   <canvas id="waterfall" width="400" height="100" style="width: 100%; height: 100px; background-color: #1e1e1e; margin-top: 10px;"></canvas>
                   <canvas id="waveform" width="400" height="50" style="width: 100%; height: 50px; background-color: #1e1e1e; margin-top: 10px;"></canvas>
               </div>
           </div>

           <!-- Log Panel (Right) -->
           <div class="col-4" style="font-size: 0.85em; width: 400px;">
               <div class="card" style="padding: 10px; min-height: 550px;">
                   <h3 style="font-size: 1.1em; margin-bottom: 8px; color: #f5f5f5;">Log</h3>
                   <div style="height: 450px; overflow-y: auto; background-color: #1e1e1e; margin-top: 10px; padding: 10px;">
                       <ul id="log" class="list">
                           <!-- Log entries will appear here -->
                       </ul>
                   </div>
               </div>
           </div>
       </div>
    </div>
    <script src="../src/pxlwaveConv.js" defer></script>
    
    <script src="../src/ui.js" defer></script>
    <script src="../src/transmit.js" defer></script>
    

</body>
</html>
