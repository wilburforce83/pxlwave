// Assuming the pxlwaveConv.js file is loaded and its functions are available
const gridData = [
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    13,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    30,
    30,
    30,
    30,
    7,
    7,
    7,
    30,
    7,
    7,
    30,
    7,
    7,
    7,
    30,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    30,
    30,
    30,
    30,
    30,
    30,
    7,
    30,
    30,
    7,
    7,
    30,
    30,
    7,
    30,
    30,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    30,
    30,
    7,
    7,
    30,
    30,
    7,
    30,
    30,
    7,
    7,
    30,
    30,
    7,
    30,
    30,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    30,
    30,
    7,
    7,
    30,
    30,
    7,
    30,
    30,
    7,
    30,
    30,
    30,
    7,
    30,
    30,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    30,
    30,
    30,
    30,
    30,
    30,
    7,
    7,
    30,
    30,
    30,
    30,
    7,
    7,
    30,
    30,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    30,
    30,
    30,
    8,
    8,
    8,
    30,
    30,
    30,
    30,
    8,
    8,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    30,
    8,
    30,
    30,
    8,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    8,
    8,
    30,
    30,
    8,
    30,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    30,
    30,
    8,
    8,
    30,
    30,
    8,
    30,
    30,
    30,
    30,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    30,
    8,
    8,
    30,
    8,
    8,
    8,
    30,
    30,
    30,
    30,
    8,
    8,
    8,
    8,
    8,
    8,
    8,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    30,
    30,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    30,
    30,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    30,
    30,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    9,
    9,
    9,
    30,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    9,
    9,
    9,
    30,
    4,
    4,
    4,
    4,
    4,
    4,
    30,
    9,
    9,
    9,
    30,
    4,
    4,
    3,
    3,
    30,
    30,
    9,
    9,
    9,
    30,
    30,
    3,
    3,
    3,
    3,
    30,
    30,
    9,
    9,
    9,
    30,
    30,
    3,
    3,
    3,
    3,
    30,
    30,
    9,
    9,
    9,
    30,
    30,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    3,
    3,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    9,
    30,
    30,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    30,
    30,
    30,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    9,
    30,
    9,
    30,
    9,
    30,
    30,
    30,
    30,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    30,
    30,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    30,
    9,
    30,
    30,
    9,
    30,
    9,
    9,
    30,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    30,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    9,
    9,
    9,
    30,
    30,
    30,
    30,
    9,
    30,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    9
];

const canvas = document.getElementById('splash-canvas');
const progressBar = document.getElementById('progress-bar');
const renderInterval = 5000 / gridData.length; // Interval to render each pixel over 5 seconds

// Function to render the image progressively
function renderImageProgressively(canvas, gridData) {
    const ctx = canvas.getContext('2d');
    const pixelSize = canvas.width / 32; // Each pixel will be 8x8

    let pixelIndex = 0;
    function renderNextPixel() {
        if (pixelIndex >= gridData.length) {
            const welcome = document.getElementById('pxlwave-hello');
            welcome.style.display = 'flex';
          setTimeout(hideSplashScreen,2000);
    
            return; // All pixels have been rendered
        }

        const i = Math.floor(pixelIndex / 32); // Row
        const j = pixelIndex % 32; // Column
        const colorIndex = gridData[pixelIndex];
        const color = colorPalette[colorIndex];

        // Render the pixel on the canvas
        ctx.fillStyle = color;
        ctx.fillRect(j * pixelSize, i * pixelSize, pixelSize, pixelSize);

        // Update progress bar
        const progressPercent = ((pixelIndex + 1) / gridData.length) * 100;
        progressBar.style.width = progressPercent + '%';

        // Move to the next pixel
        pixelIndex++;
        setTimeout(renderNextPixel, renderInterval); // Recursively render the next pixel
    }

    // Start rendering the first pixel
    renderNextPixel();
}

// Start the rendering process
renderImageProgressively(canvas, gridData);

// Hide splash screen after rendering completion
function hideSplashScreen() {
    // Select the splash screen element
const splashScreen = document.getElementById('splash-screen');

// Add the fade-out class to start the transition
splashScreen.classList.add('fade-out');

// Set a timeout to hide the splash screen after the transition finishes
setTimeout(() => {
    splashScreen.style.display = 'none';
}, 500); // Match this duration to the transition duration in CSS (0.5s here)
}

